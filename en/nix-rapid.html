<!DOCTYPE html>
<!-- DoNotFormat -->
<!-- DoNotFormat -->




<!-- DoNotFormat -->
<!-- DoNotFormat -->

<html lang='en'>

<head>
  <meta charset='UTF-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <title>
    Rapid Introduction to Nix – NixOS Asia
  </title>
  
    
      <meta property='og:description' content='The goal of this mini-tutorial is to introduce you to Nix the language, including flakes, as quickly as possible while also preparing the motivated learner to dive deeper into the whole Nix ecosystem. At the end of this introduction, you will be able to create a flake.nix that builds a package and provides a developer environment shell.Nixflakesthe whole Nix ecosystemflake.nixdeveloper environment' />
      <meta property='og:site_name' content='NixOS Asia' />
      <meta property='og:image' content='https://nixos.asia/en/nix-tutorial/nix-rapid.png' />
      <meta property='og:type' content='website' />
      <meta property='og:title' content='Rapid Introduction to Nix' />
      
        <meta name='twitter:card' content='summary_large_image' />
      
    
    
      <base href='/en/' />
      <link href='static/nixos-asia.svg' rel='icon' />
    
    <!-- highlight.js -->
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/hybrid.min.css' />
<script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js'></script>
<!-- Include languages that Emanote itself uses -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/languages/haskell.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/languages/nix.min.js'></script>
<script>hljs.highlightAll();</script>



  
  
  <link href='tailwind.css?instanceId=d8f3275d-d37b-4a6c-a60c-79bca999a75b' rel='stylesheet' type='text/css' />

  <style>
    /* Heist error element */
    strong.error {
      color: lightcoral;
      font-size: 90%;
      font-family: monospace;
    }

    /* Callouts */
    div.callout {
      background-color: #f5f5f5;
      padding: 1em 1em 0.5em;
      border-radius: 0.5em;
      margin-bottom: 1em;
    }

    .callout[data-callout="note"] {
      --callout-color: 8, 109, 221;
    }

    .callout[data-callout="info"] {
      --callout-color: 8, 109, 221;
    }

    .callout[data-callout="tip"] {
      --callout-color: 8, 191, 188;
    }

    .callout[data-callout="warning"] {
      --callout-color: 236, 117, 0;
    }

    .callout[data-callout="failure"] {
      --callout-color: 233, 49, 71;
    }

    div.callout {
      background-color: rgba(var(--callout-color), 0.1);
    }

    .callout .callout-title {
      color: rgb(var(--callout-color));
    }

    div.callout-title {
      display: flex;
      align-items: center;
      margin-bottom: 0.5em;
      font-variation-settings: 'wght' 600;
    }

    div.callout-title div.callout-title-inner {
      margin-left: 0.5em;
    }

    a.--ema-toc:not(.toc-item-active) {
      background-color: #ffffff !important;
    }

    /* External link icon */
    a[data-linkicon=""]::after {
      content: ""
    }

    a[data-linkicon=none]::after {
      content: ""
    }

    a[data-linkicon="external"] {
      padding-right: 24px;
    }

    a[data-linkicon="external"]::after {
      margin-right: -24px;
      content: url('data:image/svg+xml,\
      <svg xmlns="http://www.w3.org/2000/svg" height="0.7em" viewBox="0 0 20 20"> \
        <g style="stroke:gray;stroke-width:1"> \
          <line x1="5" y1="5" x2="5" y2="14" /> \
          <line x1="14" y1="9" x2="14" y2="14" /> \
          <line x1="5" y1="14" x2="14" y2="14" /> \
          <line x1="5" y1="5" x2="9" y2="5"  /> \
          <line x1="10" y1="2" x2="17" y2="2"  /> \
          <line x1="17" y1="2" x2="17" y2="9" /> \
          <line x1="10" y1="9" x2="17" y2="2" style="stroke-width:1.0" /> \
        </g> \
      </svg>');
    }

    a[data-linkicon="external"][href^="mailto:"]::after {
      content: url('data:image/svg+xml,\
        <svg \
          xmlns="http://www.w3.org/2000/svg" \
          height="0.7em" \
          fill="none" \
          viewBox="0 0 24 24" \
          stroke="gray" \
          stroke-width="2"> \
          <path \
            stroke-linecap="round" \
            stroke-linejoin="round" \
            d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /> \
        </svg>');
    }
  </style>
  <!-- What goes in this file will appear on near the end of <head>--><link rel='preload' href='_emanote-static/fonts/Work_Sans/WorkSans-VariableFont_wght.ttf' as='font' type='font/ttf' crossorigin />

<style>
  @font-face {
    font-family: 'WorkSans';
    /* FIXME: This ought to be: ${ema:emanoteStaticLayerUrl}/fonts/Work_Sans/WorkSans-VariableFont_wght.ttf */
    src: url(_emanote-static/fonts/Work_Sans/WorkSans-VariableFont_wght.ttf) format("truetype");
    font-display: swap;
  }

  body {
    font-family: 'WorkSans', sans-serif;
    font-variation-settings: 'wght' 350;
  }

  a.mavenLinkBold {
    font-variation-settings: 'wght' 400;
  }

  strong {
    font-variation-settings: 'wght' 500;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  header,
  .header-font {
    font-family: 'WorkSans', sans-serif;
  }

  h1 {
    font-variation-settings: 'wght' 500;
  }

  h2 {
    font-variation-settings: 'wght' 400;
  }

  h3 {
    font-variation-settings: 'wght' 300;
  }
</style>


  
    <style>
      /* For use in sidebar.tpl, as we cannot achieve this in tailwind itself! */
      /* md:min-w-48  */
      @media (min-width: 768px) {
        #sidebar {
          min-width: 12rem;
        }
      }

      /* xl:min-w-64  */
      @media (min-width: 1280px) {
        #sidebar {
          min-width: 16rem;
        }
      }
    </style>

    
      <link rel='stylesheet' href='_emanote-static/inverted-tree.css' />
    
  
  <link rel='stylesheet' href='_emanote-static/stork/flat.css' />
<!-- Custom Stork-search styling for Emanote -->
<style>
  #stork-search-container {
    z-index: 1000;
    background-color: rgb(15 23 42/.8);
  }

  .stork-overflow-hidden-important {
    overflow: hidden !important;
  }
</style>


<script src='_emanote-static/stork/stork.js'></script>

  
    <script id='emanote-stork' data-emanote-base-url='/en/'>
      window.emanote = {};
      window.emanote.stork = {
        searchShown: false,
        indexIsStale: false,
        toggleSearch: function () {
          window.emanote.stork.refreshIndex();
          document.getElementById('stork-search-container').classList.toggle('hidden');
          window.emanote.stork.searchShown = document.body.classList.toggle('stork-overflow-hidden-important');
          if (window.emanote.stork.searchShown) {
            document.getElementById('stork-search-input').focus();
          }
        },
        clearSearch: function () {
          document.getElementById('stork-search-container').classList.add('hidden');
          document.body.classList.remove('stork-overflow-hidden-important');
          window.emanote.stork.searchShown = false;
        },

        getBaseUrl: function () {
          const baseUrl = document.getElementById("emanote-stork").getAttribute('data-emanote-base-url') || '/';
          return baseUrl;
        },

        registerIndex: function (options) {
          const indexName = 'emanote-search'; // used to match input[data-stork] attribute value
          const indexUrl = window.emanote.stork.getBaseUrl() + '-/stork.st';
          stork.register(
            indexName,
            indexUrl,
            options);
        },

        init: function () {
          if (document.readyState !== 'complete') {
            window.addEventListener('load', function () {
              stork.initialize(window.emanote.stork.getBaseUrl() + '_emanote-static/stork/stork.wasm');
              window.emanote.stork.registerIndex();
            });

            document.addEventListener('keydown', event => {
              if (window.emanote.stork.searchShown && event.key === 'Escape') {
                window.emanote.stork.clearSearch();
                event.preventDefault();
              } else if ((event.key == 'k' || event.key == 'K') && (event.ctrlKey || event.metaKey)) {
                window.emanote.stork.toggleSearch();
                event.preventDefault();
              }
            });
          } else {
            // This section is called during Ema's hot reload.
            // 
            // Mark the current index as stale, and refresh it *only when* the
            // user actually invokes search.
            // 
            // We do not refresh the index *right away*, as that will cause
            // memory leaks in the browser. See
            // https://github.com/srid/emanote/issues/411#issuecomment-1402056235
            console.log("stork: Marking index as stale");
            window.emanote.stork.markIndexAsStale();
          }
        },

        markIndexAsStale: function () {
          window.emanote.stork.indexIsStale = true;
        },

        refreshIndex: function () {
          if (window.emanote.stork.indexIsStale) {
            console.log("stork: Reloading index");
            window.emanote.stork.indexIsStale = false;
            // NOTE: This will leak memory. See the comment above.
            window.emanote.stork.registerIndex({ forceOverwrite: true });
          }
        }

      };

      window.emanote.stork.init();
    </script>
  

</head>

<!-- DoNotFormat -->



<!-- DoNotFormat -->

<body class='bg-gray-400 overflow-y-scroll'>
  
    <div class='container mx-auto mt-2 md:mt-4  '>
      
        <!-- DoNotFormat -->
<!-- DoNotFormat -->

<nav id='uptree' class='flipped tree' style='transform-origin: 50%;'>
  <ul class='root'>
    <li>
      
        <ul>
          
            <li>

  <a href='nix-tutorial'>
    <div class='text-gray-900 hover:bg-green-500 hover:text-white cursor-pointer forest-link'>
      Nix Tutorial Series
    </div>
  </a>

  
    <ul>
      
        <li>

  <a href='tutorial'>
    <div class='text-gray-900 hover:bg-green-500 hover:text-white cursor-pointer forest-link'>
      Tutorials
    </div>
  </a>

  
    <ul>
      
        <li>

  <a href=''>
    <div class='text-gray-900 hover:bg-green-500 hover:text-white cursor-pointer forest-link'>
      NixOS Asia
    </div>
  </a>

  
</li>
      
    </ul>
  
</li>
      
    </ul>
  
</li>
          
            <li>

  <a href='flakes'>
    <div class='text-gray-900 hover:bg-green-500 hover:text-white cursor-pointer forest-link'>
      Flakes
    </div>
  </a>

  
    <ul>
      
        <li>

  <a href='nix'>
    <div class='text-gray-900 hover:bg-green-500 hover:text-white cursor-pointer forest-link'>
      Nix
    </div>
  </a>

  
    <ul>
      
        <li>

  <a href='topics'>
    <div class='text-gray-900 hover:bg-green-500 hover:text-white cursor-pointer forest-link'>
      Topics
    </div>
  </a>

  
</li>
      
    </ul>
  
</li>
      
    </ul>
  
</li>
          
        </ul>
      
    </li>
  </ul>
</nav>
      

      
        <nav id='breadcrumbs' class='w-full text-gray-700 md:hidden'>
  <div class='flex justify-left'>
    <div class='w-full px-2 py-2 bg-gray-50'>
      <ul class='flex flex-wrap text-lg'>
        <li class='inline-flex items-center'>
          
            
              <img style='width: 1rem;' src='static/nixos-asia.svg' />
            
          
        </li>
        
          
            <li class='inline-flex items-center'>
              <a class='px-1 font-bold' href=''>
                NixOS Asia
              </a>
              <svg fill='currentColor' viewBox='0 0 20 20' class='w-auto h-5 text-gray-400'>
                <path fill-rule='evenodd' d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z' clip-rule='evenodd'></path>
              </svg>
            </li>
          
        
      </ul>
    </div>
    <button class='inline px-2 py-1 bg-gray-50 outline-none cursor-pointer focus:outline-none' title='Search (Ctrl+K)' type='button' onclick='window.emanote.stork.toggleSearch()'>
      <svg xmlns='http://www.w3.org/2000/svg' style='width: 1rem;' class='hover:text-green-700' f
 fill='none' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2'>
  <path stroke-linecap='round' stroke-linejoin='round' d='M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z'></path>
</svg>
    </button>
    <button class='inline px-2 py-1 text-white bg-green-600 outline-none cursor-pointer focus:outline-none' title='Toggle sidebar' type='button' onclick="toggleHidden('sidebar')">
      <svg xmlns='http://www.w3.org/2000/svg' class='w-4' fill='none' viewBox='0 0 24 24' stroke='currentColor'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 6h16M4 12h16M4 18h16'></path>
      </svg>
    </button>
    <script>
      function toggleHidden(elemId) {
        document.getElementById(elemId).classList.toggle("hidden");
      }
    </script>
  </div>
</nav>
      

      
        <div id='container' class='relative md:shadow-2xl md:mb-8'>
          
  <div class='absolute -top-6 right-1 md:right-0 flex flex-row items-center justify-center'>
    <a title='Search (Ctrl+K)' class='cursor-pointer' onclick='window.emanote.stork.toggleSearch()'>
      <svg xmlns='http://www.w3.org/2000/svg' style='width: 1rem;' class='hover:text-green-700' f
 fill='none' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2'>
  <path stroke-linecap='round' stroke-linejoin='round' d='M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z'></path>
</svg>
    </a>
  </div>

          <!-- Main body column -->
          <div class='flex-1 w-full bg-white'>
  <main class='px-4 py-4'>
    <h1 class='flex items-end justify-center mb-4 p-3 bg-green-100 text-5xl font-extrabold text-black rounded'>
  <a class='z-40 tracking-tighter '>
    Rapid Introduction to Nix
  </a>
</h1>
    
      <article class='overflow-auto'>
  <!-- What goes in this file will appear on top of note body-->
  






    <p class='mb-3'>
      The goal of this mini-tutorial is to introduce you to <a href='nix' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>Nix</a> the language, including <a href='flakes' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>flakes</a>, as quickly as possible while also preparing the motivated learner to dive deeper into <a href='https://zero-to-nix.com/' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>the whole Nix ecosystem</a>. At the end of this introduction, you will be able to create a <a href='flakes' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkTag'>flake.nix</a> that builds a package and provides a <a href='dev' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>developer environment</a> shell.
    </p>
  <img class='inline mb-3' src='nix-tutorial/nix-rapid.png' alt='/nix/store/1c99jp7g8w8qilv1mpw8sw7s19v6h57f-global/nix-tutorial/nix-rapid.png' style='width: inherit;' /><div data-callout-metadata data-callout-fold data-callout='tip' class='callout bg-opacity-10' role='note'>
  <path d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'>
  </path>
  <div class='callout-title'>
    <div class='callout-icon'>
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='w-5 h-5'>
        <path d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'>
</path>
      </svg>
    </div>
    <div class='callout-title-inner'>
       Purely functional
    </div>
  </div>
  <div class='callout-content'>
    
    <p class='mb-3'>
      If you are already experienced in <a href='https://en.wikipedia.org/wiki/Purely_functional_programming' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>purely functional programming</a>, it is highly recommended to read <a href='https://www.tweag.io/blog/2022-07-14-taming-unix-with-nix/' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>Nix - taming Unix with functional programming</a> to gain a foundational perspective into Nix being purely functional but in the context of <em>file system</em> (as opposed to values stored in memory).
    </p>
  
    <blockquote class='py-0.5 px-4 mb-3 italic border-l-4 bg-gray-50 text-gray-600 border-gray-400 quote'>
      
    <p class='mb-3'>
      [..] we can treat the file system in an operating system like memory in a running program, and equate package management to memory management
    </p>
  
    </blockquote>
  
  </div>
</div>
    <h2 id='pre' class='group mt-6 mb-4 font-bold text-gray-700 text-4xl'>
      
  Pre-requisites
  
  <a href='nix-rapid#pre' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h2>
  
    <ul class='my-3 ml-6 space-y-1 list-disc'>
      
        <li>
          <strong>Install Nix</strong>: Nix can be <a href='install' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>installed on Linux and macOS</a>. If you are using <a href='nixos' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>NixOS</a>, it already comes with Nix pre-installed.
        </li>
      
        <li>
          <strong>Play with Nix</strong>: Before writing Nix expressions, it is useful to get a feel for working with the <code class='py-0.5 px-0.5 bg-gray-100'>nix</code> command. See <a href='nix-first' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>First steps with Nix</a>
        </li>
      
    </ul>
  
    <h2 id='attrset' class='group mt-6 mb-4 font-bold text-gray-700 text-4xl'>
      
  Attrset
  
  <a href='nix-rapid#attrset' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h2>
  <div data-callout-metadata data-callout-fold data-callout='info' class='callout bg-opacity-10' role='note'>
  <path d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'>
  </path>
  <div class='callout-title'>
    <div class='callout-icon'>
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='w-5 h-5'>
        <circle cx='12' cy='12' r='10'></circle>
<line x1='12' y1='16' x2='12' y2='12'></line>
<line x1='12' y1='8' x2='12.01' y2='8'></line>
      </svg>
    </div>
    <div class='callout-title-inner'>
       To learn more
    </div>
  </div>
  <div class='callout-content'>
    
    <ul class='my-3 ml-6 space-y-1 list-disc'>
      
        <li>
          <a href='https://nixos.org/manual/nix/stable/language/values.html#attribute-set' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>Official manual</a>
        </li>
      
        <li>
          <a href='https://nix.dev/tutorials/nix-language#attribute-set' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>nix.dev on attrsets</a>
        </li>
      
    </ul>
  
  </div>
</div>
    <p class='mb-3'>
      The <a href='https://nixos.org/manual/nix/stable/language/index.html' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>Nix programming language</a> provides a lot of general constructs. But at its most basic use, it makes heavy use of <em>nested hash maps</em> otherwise called an “attrset”. They are equivalent to <a href='https://hackage.haskell.org/package/containers-0.6.7/docs/Data-Map-Strict.html#t:Map' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'><code class='py-0.5 px-0.5 bg-gray-100'>Map Text a</code></a> in Haskell. The following is a simple example of an attrset:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='nix language-nix'>{
  foo = {
    bar = 1;
  };
}</code></pre></div>
    <p class='mb-3'>
      We have an outer attrset with a single key <code class='py-0.5 px-0.5 bg-gray-100'>foo</code>, whose value is another attrset with a single key <code class='py-0.5 px-0.5 bg-gray-100'>bar</code> and a value of <code class='py-0.5 px-0.5 bg-gray-100'>1</code>.
    </p>
  
    <h2 id='repl' class='group mt-6 mb-4 font-bold text-gray-700 text-4xl'>
      
  repl
  
  <a href='nix-rapid#repl' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h2>
  
    <p class='mb-3'>
      Nix expressions can be readily evaluated in the <a href='repl' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>Nix repl</a>. To start the repl, run <code class='py-0.5 px-0.5 bg-gray-100'>nix repl</code>.
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>$ nix repl
Welcome to Nix 2.12.0. Type :? for help.

nix-repl&gt;</code></pre></div>
    <p class='mb-3'>
      You can then evaluate expressions:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='nix language-nix'>nix-repl&gt; 2+3
5

nix-repl&gt; x = { foo = { bar = 1; }; }

nix-repl&gt; x
{ foo = { ... }; }

nix-repl&gt; x.foo
{ bar = 1; }

nix-repl&gt; x.foo.bar
1

nix-repl&gt;</code></pre></div>
    <h2 id='flakes' class='group mt-6 mb-4 font-bold text-gray-700 text-4xl'>
      
  <a href='flakes' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>Flakes</a>
  
  <a href='nix-rapid#flakes' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h2>
  <div data-callout-metadata data-callout-fold data-callout='info' class='callout bg-opacity-10' role='note'>
  <path d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'>
  </path>
  <div class='callout-title'>
    <div class='callout-icon'>
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='w-5 h-5'>
        <circle cx='12' cy='12' r='10'></circle>
<line x1='12' y1='16' x2='12' y2='12'></line>
<line x1='12' y1='8' x2='12.01' y2='8'></line>
      </svg>
    </div>
    <div class='callout-title-inner'>
       To learn more
    </div>
  </div>
  <div class='callout-content'>
    
    <ul class='my-3 ml-6 space-y-1 list-disc'>
      
        <li>
          <a href='https://serokell.io/blog/practical-nix-flakes#basic-flake-structure' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>Serokell Blog: Basic flake structure</a>
        </li>
      
    </ul>
  
  </div>
</div>
    <p class='mb-3'>
      A Nix <a href='flakes' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>flake</a> is defined in the <code class='py-0.5 px-0.5 bg-gray-100'>flake.nix</code> file, which denotes an attrset containing two keys <code class='py-0.5 px-0.5 bg-gray-100'>inputs</code> and <code class='py-0.5 px-0.5 bg-gray-100'>outputs</code>. <em>Outputs</em> can reference <em>inputs</em>. Thus, changing an <em>input</em> can change the <em>outputs</em>. The following is a simple example of a flake:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='nix language-nix'>{
  inputs = { };

  outputs = inputs: {
    foo = 42;
  };
}</code></pre></div>
    <p class='mb-3'>
      This flake has zero <code class='py-0.5 px-0.5 bg-gray-100'>inputs</code>. <code class='py-0.5 px-0.5 bg-gray-100'>outputs</code> is a <a href='https://nixos.org/manual/nix/stable/language/constructs.html#functions' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>function</a> that takes the (realised) inputs as an argument and returns the final output attrset. This output attrset, in our example, has a single key <code class='py-0.5 px-0.5 bg-gray-100'>foo</code> with a value of <code class='py-0.5 px-0.5 bg-gray-100'>42</code>.
    </p>
  
    <p class='mb-3'>
      We can use the <a href='https://nixos.org/manual/nix/stable/command-ref/new-cli/nix3-flake-show.html' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'><code class='py-0.5 px-0.5 bg-gray-100'>nix flake show</code></a> command to see the output structure of a flake:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>$ nix flake show
path:/Users/srid/code/nixplay?lastModified=1675373998&amp;narHash=sha256-ifNiFGU1VV784kVcssn2rXIil%2feHfMLhPfmvaELefwA=
└───foo: unknown
$</code></pre></div>
    <p class='mb-3'>
      We can use <a href='https://nixos.org/manual/nix/stable/command-ref/new-cli/nix3-eval.html' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'><code class='py-0.5 px-0.5 bg-gray-100'>nix eval</code></a> to evaluate any output. For example,
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>$ nix eval .#foo
42</code></pre></div>
    <h3 id='graph' class='group mt-6 mb-4 font-bold text-gray-700 text-3xl'>
      
  Graph
  
  <a href='nix-rapid#graph' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h3>
  
    <p class='mb-3'>
      A flake can refer to other flakes in its inputs. Phrased differently, a flake’s outputs can be used as inputs in other flakes. The most common example is the <a href='nixpkgs' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>nixpkgs</a> flake which gets used as an input in most flakes. Intuitively, you may visualize a flake to be a node in a larger graph, with inputs being the incoming arrows and outputs being the outgoing arrows.
    </p>
  
    <h3 id='inputs' class='group mt-6 mb-4 font-bold text-gray-700 text-3xl'>
      
  Inputs
  
  <a href='nix-rapid#inputs' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h3>
  <div data-callout-metadata data-callout-fold data-callout='info' class='callout bg-opacity-10' role='note'>
  <path d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'>
  </path>
  <div class='callout-title'>
    <div class='callout-icon'>
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='w-5 h-5'>
        <circle cx='12' cy='12' r='10'></circle>
<line x1='12' y1='16' x2='12' y2='12'></line>
<line x1='12' y1='8' x2='12.01' y2='8'></line>
      </svg>
    </div>
    <div class='callout-title-inner'>
       To learn more
    </div>
  </div>
  <div class='callout-content'>
    
    <ul class='my-3 ml-6 space-y-1 list-disc'>
      
        <li>
          <a href='flake-url' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>URL-like syntax</a> used by the <code class='py-0.5 px-0.5 bg-gray-100'>url</code> attribute
        </li>
      
    </ul>
  
  </div>
</div>
    <p class='mb-3'>
      Let’s do something more interesting with our <code class='py-0.5 px-0.5 bg-gray-100'>flake.nix</code> by adding the <a href='nixpkgs' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>nixpkgs</a> input:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='nix language-nix'>{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixpkgs-unstable";
  };

  outputs = inputs: {
    # Note: If you are macOS, substitute `x86_64-linux` with `aarch64-darwin`
    foo = inputs.nixpkgs.legacyPackages.x86_64-linux.cowsay;
  };
}</code></pre></div><div data-callout-metadata data-callout-fold data-callout='note' class='callout bg-opacity-10' role='note'>
  <path d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'>
  </path>
  <div class='callout-title'>
    <div class='callout-icon'>
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='w-5 h-5'>
        <line x1='18' y1='2' x2='22' y2='6'></line>
<path d='M7.5 20.5 19 9l-4-4L3.5 16.5 2 22z'></path>
      </svg>
    </div>
    <div class='callout-title-inner'>
       About <code class='py-0.5 px-0.5 bg-gray-100'>nixpkgs-unstable</code>
    </div>
  </div>
  <div class='callout-content'>
    
    <p class='mb-3'>
      The <code class='py-0.5 px-0.5 bg-gray-100'>nixpkgs-unstable</code> branch is frequently updated, hence its name, but this doesn’t imply instability or unsuitability for use.
    </p>
  
  </div>
</div>
    <p class='mb-3'>
      The <a href='nixpkgs' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>nixpkgs</a> flake has an output called <code class='py-0.5 px-0.5 bg-gray-100'>legacyPackages</code>, which is indexed by the platform (called “system” in Nix-speak), further containing all the packages for that system. We assign that package to our flake output key <code class='py-0.5 px-0.5 bg-gray-100'>foo</code>.
    </p>
  <div data-callout-metadata data-callout-fold data-callout='tip' class='callout bg-opacity-10' role='note'>
  <path d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'>
  </path>
  <div class='callout-title'>
    <div class='callout-icon'>
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='w-5 h-5'>
        <path d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'>
</path>
      </svg>
    </div>
    <div class='callout-title-inner'>
       You can use <a href='repl' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>`nix repl`</a> to explore the outputs of any flake, using TAB completion:
    </div>
  </div>
  <div class='callout-content'>
    <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>$ nix repl --extra-experimental-features 'flakes repl-flake' github:nixos/nixpkgs/nixpkgs-unstable
Welcome to Nix 2.12.0. Type :? for help.

Loading installable 'github:nixos/nixpkgs/nixpkgs-unstable#'...
Added 5 variables.
nix-repl&gt; legacyPackages.aarch64-darwin.cowsay
«derivation /nix/store/0s2vdpkpdiljmh8y06xgdw5vg2cqfs0m-cowsay-3.7.0.drv»

nix-repl&gt;</code></pre></div>
  </div>
</div>
    <h3 id='predefined-outputs' class='group mt-6 mb-4 font-bold text-gray-700 text-3xl'>
      
  Predefined outputs
  
  <a href='nix-rapid#predefined-outputs' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h3>
  
    <p class='mb-3'>
      Nix commands treat <a href='https://nixos.wiki/wiki/Flakes#Output_schema' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>certain outputs as special</a>. These are:
    </p>
  <table class='mb-3'><thead><tr class='border-b-2 border-t-2 border-gray-300'><th class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'>Output</th><th class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'>Nix command</th><th class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'>Description</th></tr></thead><tbody><tr class='border-b-2 border-t-2 border-gray-300'><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'><code class='py-0.5 px-0.5 bg-gray-100'>packages</code></td><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'><code class='py-0.5 px-0.5 bg-gray-100'>nix build</code></td><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'><a href='drv' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>Derivation</a> output</td></tr><tr class='border-b-2 border-t-2 border-gray-300'><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'><code class='py-0.5 px-0.5 bg-gray-100'>devShells</code></td><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'><code class='py-0.5 px-0.5 bg-gray-100'>nix develop</code></td><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'><a href='dev' class='text-green-600 mavenLinkBold hover:underline'>Development</a> shells</td></tr><tr class='border-b-2 border-t-2 border-gray-300'><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'><code class='py-0.5 px-0.5 bg-gray-100'>apps</code></td><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'><code class='py-0.5 px-0.5 bg-gray-100'>nix run</code></td><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'>Runnable applications</td></tr><tr class='border-b-2 border-t-2 border-gray-300'><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'><code class='py-0.5 px-0.5 bg-gray-100'>checks</code></td><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'><code class='py-0.5 px-0.5 bg-gray-100'>nix flake check</code></td><td class='py-2 px-2 align-top border-r-2 border-l-2 border-gray-300'>Tests and checks</td></tr></tbody></table>
    <p class='mb-3'>
      All of these predefined outputs are further indexed by the “system” value.
    </p>
  
    <h4 id='packages' class='group mt-6 mb-4 font-bold text-gray-700 text-2xl'>
      
  Packages
  
  <a href='nix-rapid#packages' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h4>
  <div data-callout-metadata data-callout-fold data-callout='info' class='callout bg-opacity-10' role='note'>
  <path d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'>
  </path>
  <div class='callout-title'>
    <div class='callout-icon'>
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='w-5 h-5'>
        <circle cx='12' cy='12' r='10'></circle>
<line x1='12' y1='16' x2='12' y2='12'></line>
<line x1='12' y1='8' x2='12.01' y2='8'></line>
      </svg>
    </div>
    <div class='callout-title-inner'>
       To learn more
    </div>
  </div>
  <div class='callout-content'>
    
    <ul class='my-3 ml-6 space-y-1 list-disc'>
      
        <li>
          <a href='https://nixos.org/manual/nixpkgs/stable/#sec-using-stdenv' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'><code class='py-0.5 px-0.5 bg-gray-100'>pkgs.stdenv.mkDerivation</code></a> can be used to build a custom package from scratch
        </li>
      
    </ul>
  
  </div>
</div>
    <p class='mb-3'>
      <code class='py-0.5 px-0.5 bg-gray-100'>packages</code> is the most often used output. Let us extend our previous <code class='py-0.5 px-0.5 bg-gray-100'>flake.nix</code> to use it:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='nix language-nix'>{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixpkgs-unstable";
  };

  outputs = inputs: {
    foo = 42;
    packages.x86_64-linux = {
      cowsay = inputs.nixpkgs.legacyPackages.x86_64-linux.cowsay;
    };
  };
}</code></pre></div>
    <p class='mb-3'>
      Here, we are producing an output named <code class='py-0.5 px-0.5 bg-gray-100'>packages</code> that is an attrset of systems (currently, only <code class='py-0.5 px-0.5 bg-gray-100'>x86_64-linux</code>) to attrsets of packages. We are definining exactly one package, <code class='py-0.5 px-0.5 bg-gray-100'>cowsay</code>, for the <code class='py-0.5 px-0.5 bg-gray-100'>x86_64-linux</code> system.
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>$ nix flake show
path:/Users/srid/code/nixplay?lastModified=1675374260&amp;narHash=sha256-FRven09fX3hutGa8+dagOCSQKVYAsHI6BsnCSEQ7PG8=
├───foo: unknown
└───packages
    └───aarch64-darwin
        └───cowsay: package 'cowsay-3.7.0'</code></pre></div>
    <p class='mb-3'>
      Notice that <code class='py-0.5 px-0.5 bg-gray-100'>nix flake show</code> recognizes the <em>type</em> of <code class='py-0.5 px-0.5 bg-gray-100'>packages</code>. With <code class='py-0.5 px-0.5 bg-gray-100'>foo</code>, it couldn’t (hence type is <code class='py-0.5 px-0.5 bg-gray-100'>unknown</code>) but with <code class='py-0.5 px-0.5 bg-gray-100'>packages</code>, it can (hence type is “package”).
    </p>
  
    <p class='mb-3'>
      The <code class='py-0.5 px-0.5 bg-gray-100'>packages</code> output is recognized by <code class='py-0.5 px-0.5 bg-gray-100'>nix build</code>.
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>$ nix build .#cowsay</code></pre></div>
    <p class='mb-3'>
      The <a href='https://nixos.org/manual/nix/stable/command-ref/new-cli/nix3-build.html' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'><code class='py-0.5 px-0.5 bg-gray-100'>nix build</code></a> command takes as argument a value of the form <code class='py-0.5 px-0.5 bg-gray-100'>&lt;flake-url&gt;#&lt;package-name&gt;</code>. By default, <code class='py-0.5 px-0.5 bg-gray-100'>.</code> (which is a <a href='flake-url' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>flake URL</a>) refers to the current flake. Thus, <code class='py-0.5 px-0.5 bg-gray-100'>nix build .#cowsay</code> will build the <code class='py-0.5 px-0.5 bg-gray-100'>cowsay</code> package from the current flake under the current system. <code class='py-0.5 px-0.5 bg-gray-100'>nix build</code> produces a <code class='py-0.5 px-0.5 bg-gray-100'>./result</code> symlink that points to the Nix store path containing the package:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>$ ./result/bin/cowsay hello
 _______
&lt; hello &gt;
 -------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||</code></pre></div>
    <p class='mb-3'>
      If you run <code class='py-0.5 px-0.5 bg-gray-100'>nix build</code> without arguments, it will default to <code class='py-0.5 px-0.5 bg-gray-100'>.#default</code>.
    </p>
  
    <h4 id='apps' class='group mt-6 mb-4 font-bold text-gray-700 text-2xl'>
      
  Apps
  
  <a href='nix-rapid#apps' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h4>
  
    <p class='mb-3'>
      A flake app is similar to a flake package except it always refers to a runnable program. You can expose the cowsay executable from the cowsay package as the default flake app:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='nix language-nix'>{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixpkgs-unstable";
  };

  outputs = inputs: {
    apps.x86_64-linux = {
      default = {
        type= "app";
        program = "${inputs.nixpkgs.legacyPackages.x86_64-linux.cowsay}/bin/cowsay";
      } ;
    };
  };
}</code></pre></div>
    <p class='mb-3'>
      Now, you can run <code class='py-0.5 px-0.5 bg-gray-100'>nix run</code> to run the cowsay app, which is equivalent to doing <code class='py-0.5 px-0.5 bg-gray-100'>nix build .#cowsay && ./result/bin/cowsay</code> in the previous flake.
    </p>
  
    <h4 id='demo' class='group mt-6 mb-4 font-bold text-gray-700 text-2xl'>
      
  Interlude: demo
  
  <a href='nix-rapid#demo' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h4>
  <div xmlhtmlRaw><script async id="asciicast-591420" src="https://asciinema.org/a/591420.js" data-speed="3" data-preload="true" data-theme="solarized-light" data-rows="30" data-idleTimeLimit="3"></script>
</div>
    <h4 id='devshells' class='group mt-6 mb-4 font-bold text-gray-700 text-2xl'>
      
  DevShells
  
  <a href='nix-rapid#devshells' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h4>
  <div data-callout-metadata data-callout-fold data-callout='info' class='callout bg-opacity-10' role='note'>
  <path d='M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z'>
  </path>
  <div class='callout-title'>
    <div class='callout-icon'>
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='w-5 h-5'>
        <circle cx='12' cy='12' r='10'></circle>
<line x1='12' y1='16' x2='12' y2='12'></line>
<line x1='12' y1='8' x2='12.01' y2='8'></line>
      </svg>
    </div>
    <div class='callout-title-inner'>
       To learn more
    </div>
  </div>
  <div class='callout-content'>
    
    <ul class='my-3 ml-6 space-y-1 list-disc'>
      
        <li>
          <a href='https://nixos.org/manual/nixpkgs/stable/#sec-pkgs-mkShell' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>Official Nix manual</a>
        </li>
      
        <li>
          <a href='https://nixos.wiki/wiki/Development_environment_with_nix-shell' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>NixOS Wiki</a>
        </li>
      
    </ul>
  
  </div>
</div>
    <p class='mb-3'>
      Like <code class='py-0.5 px-0.5 bg-gray-100'>packages</code>, another predefined flake output is <code class='py-0.5 px-0.5 bg-gray-100'>devShells</code> - which is used to provide a <a href='dev' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>development</a> shell aka. a nix <a href='shell' class='text-green-600 mavenLinkBold hover:underline' data-wikilink-type='WikiLinkNormal'>shell</a> or devshell. A devshell is a sandboxed environment containing the packages and other shell environment you specify. nixpkgs provides a function called <a href='https://nixos.org/manual/nixpkgs/stable/#sec-pkgs-mkShell' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'><code class='py-0.5 px-0.5 bg-gray-100'>mkShell</code></a> that can be used to create devshells.
    </p>
  
    <p class='mb-3'>
      As an example, we will update our <code class='py-0.5 px-0.5 bg-gray-100'>flake.nix</code> to provide a devshell that contains the <a href='https://github.com/stedolan/jq' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>jq</a> tool.
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='nix language-nix'>{
  inputs = {
    nixpkgs = {
      url = "github:NixOS/nixpkgs/nixos-unstable";
    };
  };
  outputs = inputs: {
    foo = 42;
    devShells = {  # nix develop
      aarch64-darwin = {
        default =
          let 
            pkgs = inputs.nixpkgs.legacyPackages.aarch64-darwin;
          in pkgs.mkShell {
            packages = [
              pkgs.jq
            ];
          };
      };
    };
  };
}</code></pre></div>
    <p class='mb-3'>
      <code class='py-0.5 px-0.5 bg-gray-100'>nix flake show</code> will recognize this output as a “development environmenet”:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>$ nix flake show
path:/Users/srid/code/nixplay?lastModified=1675448105&amp;narHash=sha256-dikTfYD1wbjc+vQ+IUTMXWv%2fm%2f7qb91Hk3ip5MNefeU=
├───devShells
│   └───aarch64-darwin
│       └───default: development environment 'nix-shell'
└───foo: unknown</code></pre></div>
    <p class='mb-3'>
      Just as <code class='py-0.5 px-0.5 bg-gray-100'>packages</code> can be built using <code class='py-0.5 px-0.5 bg-gray-100'>nix build</code>, you can enter the devshell using <a href='https://nixos.org/manual/nix/unstable/command-ref/new-cli/nix3-develop.html' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'><code class='py-0.5 px-0.5 bg-gray-100'>nix develop</code></a>:
    </p>
  <div class='py-0.5 mb-3 text-sm'><pre><code class='sh language-sh'>$ nix develop
❯ which jq
/nix/store/33n0kx526i5dnv2gf39qv1p3a046p9yd-jq-1.6-bin/bin/jq
❯ echo '{"foo": 42}' | jq .foo
42
❯ </code></pre></div>
    <p class='mb-3'>
      Typing <code class='py-0.5 px-0.5 bg-gray-100'>Ctrl+D</code> or <code class='py-0.5 px-0.5 bg-gray-100'>exit</code> will exit the devshell.
    </p>
  
    <h2 id='conclusion' class='group mt-6 mb-4 font-bold text-gray-700 text-4xl'>
      
  Conclusion
  
  <a href='nix-rapid#conclusion' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h2>
  
    <p class='mb-3'>
      This mini tutorial provided a rapid introduction to Nix flakes, enabling you to get started with writing simple flake for your projects. Consult the links above for more information. There is a lot more to Nix than the concepts presented here! You can also read <a href='https://zero-to-nix.com/' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>Zero to Nix</a> for a highlevel introduction to all things Nix and flakes.
    </p>
  
    <h2 id='see-also' class='group mt-6 mb-4 font-bold text-gray-700 text-4xl'>
      
  See also
  
  <a href='nix-rapid#see-also' class='--ema-anchor'>
    <span class='hover:text-green-400 group-hover:visible invisible cursor-pointer text-sm align-middle' aria-label='Copy link'><svg class='inline w-4' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
        <path d='M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71'></path>
        <path d='M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71'></path>
      </svg></span>
  </a>


    </h2>
  
    <ul class='my-3 ml-6 space-y-1 list-disc'>
      
        <li>
          <a href='https://github.com/tazjin/nix-1p' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>A (more or less) one page introduction to Nix, the language</a>
        </li>
      
        <li>
          <a href='https://www.tweag.io/blog/2022-07-14-taming-unix-with-nix/' class='text-green-600 hover:underline' data-linkicon='external' target='_blank' rel='noopener'>Nix - taming Unix with functional programming</a>
        </li>
      
    </ul>
  
  <!-- Disabled until we can limit this template to a subset of notes (blog posts):
     https://github.com/nixos-asia/website/issues/9

<aside class="flex items-center justify-center mt-2">
  <ema:metadata>
    <span id="yamlauthor" class="mb-4 text-right text-gray-600">
      Written by
      <value var="author" />
    </span>
  </ema:metadata>
  <script>if (yamlauthor.innerText.includes('error')) yamlauthor.innerText = ''</script>
</aside>
--><div class='flex items-center justify-center mt-2'>
  <div class='flex items-center justify-center mt-2'>
    
      
        <a class='text-gray-300 hover:text-green-600 text-sm' title='Edit this page on GitHub' href='https://github.com/nixos-asia/website/edit/master/en/nix-rapid.md'>
          <svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6' fill='none' viewBox='0 0 24 24' stroke='currentColor'>
            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z'></path>
          </svg>
        </a>
      
    
  </div>
</div>
</article>
    
    <div class='flex flex-col lg:flex-row lg:space-x-2'>
      
      
  <div class='flex-1 p-4 mt-8 bg-gray-100 rounded'>
    <header class='mb-2 text-xl font-semibold text-gray-500'>Links to this page</header>
    <ul class='space-y-1'>
      
        <li>
          <a class='text-green-600 mavenLinkBold hover:bg-green-50' href='nixify-haskell-nixpkgs'>
            Nixifying a Haskell project using nixpkgs
          </a>
          
            <div class='mb-4 overflow-auto text-sm text-gray-500'>
  
    <div class='pl-2 mt-2 border-l-2 border-green-200 hover:border-green-500'>
      <div>A basic understanding of the <a href='nix' class='text-gray-600 font-bold hover:bg-gray-50' data-wikilink-type='WikiLinkNormal'>Nix</a> and <a href='flakes' class='text-gray-600 font-bold hover:bg-gray-50' data-wikilink-type='WikiLinkNormal'>Flakes</a> is assumed. See <a href='nix-rapid' class='text-gray-600 font-bold hover:bg-gray-50' data-wikilink-type='WikiLinkNormal'>Rapid Introduction to Nix</a></div>
    </div>
  
</div>
          
        </li>
      
        <li>
          <a class='text-green-600 mavenLinkBold hover:bg-green-50' href='nix-tutorial'>
            Nix Tutorial Series
          </a>
          
            <div class='mb-4 overflow-auto text-sm text-gray-500'>
  
    <div class='pl-2 mt-2 border-l-2 border-green-200 hover:border-green-500'>
      <div>
          <svg xmlns='http://www.w3.org/2000/svg' class='inline h-4 w-4 mb-1 text-gray-600 stroke-current fill-current' viewBox='0 0 28 28'><desc>☑</desc><rect stroke-width='3' x='2' y='2' width='24' height='24' rx='3'></rect><path stroke='white' fill='none' stroke-linejoin='round' stroke-width='3.5' d='M7 14 l6 5L22 8'></path></svg>
<span>
  
            <a href='nix-rapid' class='text-gray-600 font-bold hover:bg-gray-50' data-wikilink-type='WikiLinkBranch'>Rapid Introduction to Nix</a>
          
</span>
        </div>
    </div>
  
</div>
          
        </li>
      
        <li>
          <a class='text-green-600 mavenLinkBold hover:bg-green-50' href='nix-first'>
            First steps with Nix
          </a>
          
            <div class='mb-4 overflow-auto text-sm text-gray-500'>
  
    <div class='pl-2 mt-2 border-l-2 border-green-200 hover:border-green-500'>
      <div>See <a href='nix-rapid' class='text-gray-600 font-bold hover:bg-gray-50' data-wikilink-type='WikiLinkNormal'>Rapid Introduction to Nix</a> where we will go over writing simple Nix expressions and <a href='flakes' class='text-gray-600 font-bold hover:bg-gray-50' data-wikilink-type='WikiLinkNormal'>flakes</a>.</div>
    </div>
  
    <div class='pl-2 mt-2 border-l-2 border-green-200 hover:border-green-500'>
      <div><p>You have <a href='install' class='text-gray-600 font-bold hover:bg-gray-50' data-wikilink-type='WikiLinkNormal'>installed Nix</a>. Now let’s play with the <code>nix</code> command but without bothering to write any Nix expressions yet (we reserve that for the <a href='nix-rapid' class='text-gray-600 font-bold hover:bg-gray-50' data-wikilink-type='WikiLinkNormal'>next tutorial</a>). In particular, we will learn how to use packages from the <a href='nixpkgs' class='text-gray-600 font-bold hover:bg-gray-50' data-wikilink-type='WikiLinkNormal'>nixpkgs</a> repository and elsewhere.</p></div>
    </div>
  
</div>
          
        </li>
      
        <li>
          <a class='text-green-600 mavenLinkBold hover:bg-green-50' href='configuration-as-flake'>
            Convert <code>configuration.nix</code> to be a flake
          </a>
          
            <div class='mb-4 overflow-auto text-sm text-gray-500'>
  
    <div class='pl-2 mt-2 border-l-2 border-green-200 hover:border-green-500'>
      <div><p>[!info] More on Flakes See <a href='nix-rapid' class='text-gray-600 font-bold hover:bg-gray-50' data-wikilink-type='WikiLinkNormal'>Rapid Introduction to Nix</a> for more information on flakes.</p></div>
    </div>
  
</div>
          
        </li>
      
    </ul>
  </div>

    </div>
    
  <section class='flex flex-wrap items-end justify-center my-4 space-x-2 space-y-2 font-mono text-sm'>
    
  </section>

    <!-- What goes in this file will at the very end of the main div -->
  </main>
</div>
        </div>
      
      <footer class='flex items-center justify-center mt-2 mb-8 space-x-4 text-center text-gray-800'>
  
  <div>
    <a href='' title='Go to Home page'>
      <svg xmlns='http://www.w3.org/2000/svg' class='w-6 h-6 hover:text-green-700' fill='none' viewBox='0 0 24 24' stroke='currentColor'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6'></path>
      </svg>
    </a>
  </div>
  <div>
    <a href='-/all' title='View Index'>
      <svg xmlns='http://www.w3.org/2000/svg' class='w-6 h-6 hover:text-green-700' fill='none' viewBox='0 0 24 24' stroke='currentColor'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253'></path>
      </svg>
    </a>
  </div>
  <div>
    <a href='https://emanote.srid.ca' target='_blank' title='Generated by Emanote 1.3.18.1'>
      <img class='w-6 h-6 hover:text-green-700' src='_emanote-static/emanote-logo.svg' />
    </a>
  </div>
  <div>
    <a href='-/tags' title='View tags'>
      <svg class='w-6 h-6 hover:text-green-700' fill='none' stroke='currentColor' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z'>
        </path>
      </svg>
    </a>
  </div>
  <div>
    <a href='-/tasks' title='View tasks'>
      <svg xmlns='http://www.w3.org/2000/svg' class='w-6 h-6 hover:text-green-700' fill='none' viewBox='0 0 24 24' stroke='currentColor'>
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z'></path>
      </svg>
    </a>
  </div>
</footer>
    </div>
  
  <div id='stork-search-container' class='hidden fixed w-screen h-screen inset-0 backdrop-filter backdrop-blur-sm'>
  <div class='fixed w-screen h-screen inset-0' onclick='window.emanote.stork.toggleSearch()'></div>

  <div class='container mx-auto p-10 mt-10'>
    <div class='stork-wrapper-flat container mx-auto'>
      <input id='stork-search-input' data-stork='emanote-search' class='stork-input' placeholder='Search (Ctrl+K) ...' />
      <div data-stork='emanote-search-output' class='stork-output'></div>
    </div>
  </div>
</div>
  
    
  
</body>

</html>
